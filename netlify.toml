[build]
  command = "npm run build"
  publish = "."

# This section ensures HTML files are treated as HTML
[[headers]]
  for = "/*.html"
  [headers.values]
    Content-Type = "text/html"

# This section is CRITICAL for the proxy engine
[[headers]]
  for = "/*"
  [headers.values]
    Cross-Origin-Opener-Policy = "same-origin"
    Cross-Origin-Embedder-Policy = "require-corp"
    Service-Worker-Allowed = "/"

# This ensures that when you go to a proxied site, it doesn't 404
[[redirects]]
  from = "/service/*"
  to = "/index.html"
  status = 200
